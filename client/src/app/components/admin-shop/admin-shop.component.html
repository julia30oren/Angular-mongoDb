<div id="main">
    <div class="content" [ngClass]="{small_content: open_form}">
        <div class="search-group input-group">
            <input #search_text (keyup)="searchBYname(search_text.value)" type="text" placeholder=" Search.." id="search-fild">
        </div>
        <ul class="nav justify-content-center">
            <li class="nav-item">
                <button id="first_link" class="nav-link" (click)="groupeBy('All')">All</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" (click)="groupeBy('Milk & Eggs')">Milk & Eggs</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" (click)="groupeBy('Fruit & Vegetables')">Fruit & Vegetables</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" (click)="groupeBy('Meat & Fish')">Meat & Fish</button>
            </li>
            <li class="nav-item">
                <button class="nav-link" (click)="groupeBy('Drinks')">Drinks</button>
            </li>
        </ul>

        <br>

        <div class="cards-group justify-content-center">
            <div class="card" [ngClass]="{lessCards: open_form}" (click)="isChosen(item)" *ngFor="let item of filtered_products">
                <div class="">
                    <img src={{item.image}} class="card-img" alt="...">
                </div>
                <div class="">
                    <h5 class="card-title">{{item.name}}</h5>
                    <p class="card-text">{{item.price}} $ / {{item.for_quantity}} {{item.for_measure}}</p>
                    <p class="card-text">{{item.category}}</p>
                </div>
            </div>
        </div>

    </div>
    <div *ngIf="!open_form">
        <button class="nav-link open-button" (click)="openOREclose()">Add / Edit</button>
    </div>
    <button *ngIf="open_form" class="nav-link close-button" (click)="openOREclose()">=></button>

    <div id="form" *ngIf="open_form">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="product_name">Name </span>
            </div>
            <input [(ngModel)]="product_name" [ngClass]="{'border-red':product_name === ''}" type="text" class="form-control" aria-describedby="product_name">
        </div>

        <div class="input-group  mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="_group">Group </span>
            </div>
            <select class="custom-select" [ngClass]="{'border-red':product_group === ''}" [(ngModel)]="product_group">
                    <option value="Milk & Eggs">Milk & Eggs</option>
                    <option value="Meat & Fish">Meat & Fish</option>
                    <option value="Drinks">Drinks</option>
                    <option value="Fruit & Vegetables">Fruit & Vegetables</option>
                  </select>
        </div>

        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="_price">Price </span>
            </div>
            <input [(ngModel)]="price" [ngClass]="{'border-red':price === ''}" type="text" class="form-control" aria-describedby="_price">
        </div>

        <div class="input-group  mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="_quantity">Quantity </span>
            </div>
            <input [(ngModel)]="quantity" [ngClass]="{'border-red':this.quantity===null || !this.measure===''}" type="number" min="0" step="0.5" class="form-control" aria-describedby="_quantity">
            <div class="input-group-prepend">
                <span class="input-group-text" id="_measure">Measure </span>
            </div>
            <select class="custom-select" [ngClass]="{'border-red':this.quantity===null || !this.measure===''}" [(ngModel)]="measure">
                <option value="piece" *ngIf="quantity===1">piece</option>
                <option value="pieces" *ngIf="quantity>=2">pieces</option>
                    <option value="kilogram" *ngIf="quantity<=1">kilogram</option>
                    <option value="kilograms" *ngIf="quantity>1">kilograms</option>
                    <option value="liter" *ngIf="quantity<=1">liter</option>
                    <option value="liters" *ngIf="quantity>1">liters</option>
                  </select>
        </div>

        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="_image">Image </span>
            </div>
            <input [(ngModel)]="image" [ngClass]="{'border-red':image === ''}" type="text" class="form-control" aria-describedby="_image">
        </div>

        <div *ngIf="message" class="alert alert-danger" role="alert">
            {{message}}
        </div>
        <div id="s-b">
            <button (click)="save(prod_id)" class="save_button">Save Changes</button>
            <button (click)="save()" class="save_button">Save New</button>
        </div>
    </div>
</div>

<style>
    #main {
        display: flex;
    }
    
    .content::-webkit-scrollbar {
        display: none;
    }
    
    .content {
        width: 100%;
        height: 650px;
        overflow-y: scroll;
        overflow-x: hidden;
        -ms-overflow-style: none;
    }
    
    #form {
        width: 28%;
        transition: width 1.5s;
        position: fixed;
        left: 55.5%;
        border-left: black solid 1px;
        margin: 1%;
        padding: 1%;
    }
    
    #s-b {
        height: 100px;
    }
    
    .border-red {
        border: red solid 1px;
    }
    
    .save_button {
        margin-top: 20px;
        margin-right: 20px;
        padding: 1%;
        background-color: rgba(128, 128, 128, 0.2);
    }
    
    .save_button:hover {
        background-color: rgba(128, 128, 128, 0.3);
        border: solid 1px rgba(128, 128, 128, 0.5);
    }
    
    .input-group-text {
        width: 100px;
    }
    
    .search-group {
        margin: 50px;
    }
    
    #search-fild {
        width: 250px;
        height: 50px;
    }
    
    .small_content {
        width: 59%;
    }
    
    h2 {
        margin: 50px;
        text-align: center;
    }
    
    .nav-link {
        border-right: solid black 0.5px;
    }
    
    button {
        border: none;
        background-color: white;
    }
    
    .open-button {
        position: absolute;
        right: 320px;
        margin-top: 50px;
        width: 120px;
    }
    
    .close-button {
        background-color: white;
        border-left: solid black 1px;
        border-top: solid black 1px;
        border-bottom: solid black 1px;
        border-right: none;
        position: absolute;
        left: 54%;
        top: 330px;
        z-index: 2;
    }
    
    #first_link {
        border-left: solid black 0.5px;
    }
    
    .cards-group {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .card {
        width: 19%;
        text-align: center;
        margin: 0.5%;
    }
    
    .lessCards {
        width: 30%;
    }
    
    .card-img {
        margin: 1%;
        height: 180px;
        width: 150px;
    }
</style>